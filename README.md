# 雪華（sekka）
漢字を主要パーツで分類し、送り仮名への連接も考慮した漢字直接入力

## 目的
IMEがなくてもLinuxで日本語を打てるようにする（防災用のキャンプ道具的な位置付け）

## 背景
これまで「libkcc」というIMEに「G-Code」という漢直と「四角号碼」という漢字検字コードを載せて使っていたが、libkccが使えなくなってしまった。

代わりにと検討した「Mozc」には、キーの登録数に上限があり、「Anthy」では動作が重く、使いものにならなかった。

それで、自分で漢直を作り、「KMonad」というキーボードマネージャーを使って実装することにした。

## 特徴
- 4000字を収録
社会生活で必要な漢字の数は3000から5000字
と言われている。この収録漢字を選ぶにあたり、「漢字出現頻度数調査（４）」にある7269字に範囲を限定した。

まず、最上位の「人」から常用漢字で最下位頻度の「楷」までの3937字を選択、そこからこぼれ落ちた表外漢字を追加、さらにそれらの異体字を含めるなどした結果、ちょうど4000字になった。

自分の語彙ではこれで困っていない。

- 漢字を主要パーツで分類、配置

漢字は300ほどのパーツで出来ていると言われている。各漢字の主要パーツで分類、配置し、記憶の助けとした。

具体的には「漢字系統樹表2800解字」の分類に漢字を追加し、「漢字字形史字典 教育漢字対応版」で上書き修正したものを、機械的に配列に落とし込んでいる。

- 送り仮名への連接を考慮

カナ配列部分は「薙刀式」を流用している。

これまで使っていたG-Codeは、レイヤーを変更しなくても、ひらがな、カタカナ、漢字や数字を打ち分けられる優れものだった。

しかし、苦手な「y」キーの頻度が高く、母音カナの並びを替えたりしてみたが、完全には解消されなかった。

薙刀式は「y」を使わない、拗音が一息で打てるなど、不満に思っていた点が解消されていた。

送り仮名は基本的に最頻出のものだけを考慮している（最頻出にこだわるよりも二番手を考慮した方が良い場合にはそちらを選択している）。

頻度表は「Wiki-40B/ja」から生成。

- 同時3打、または4打で漢字1字を入力
- 異体字同置
- 頻出熟語は省打鍵入力も可

## 必要なもの
- KMonad 4.2以上

## 参照資料
- 漢字系統樹表2800解字 善如寺俊彦 著
- 漢字字形史字典 教育漢字対抗対応版 落合淳思 著
- 漢字出現頻度数調査（4）令和4年2月 文化庁国語課
- Wiki-40B/ja by Google Research
- 900連接調査 by 大岡俊彦
